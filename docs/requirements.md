# Требования к калькулятору зарплаты логопеда

Документ описывает бизнес-требования к веб-калькулятору расчёта зарплаты логопеда и служит единственным источником истинных допущений для команды.

## Цели продукта
- Позволить логопеду быстро оценить ежемесячный доход при разных нагрузках и ставках.
- Дать возможность сравнивать сценарии работы (тип занятости, количество занятий, дополнительные услуги).
- Минимизировать ошибки ввода через понятную валидацию и готовые значения по умолчанию.

## Роли пользователей
- **Логопед** — основная роль, вводит параметры нагрузки и получает расчёт.
- **Администратор центра** (опционально) — настраивает значения по умолчанию и коэффициенты для команды.

## Основные разделы интерфейса
1. **Шапка/описание** — кратко объясняет назначение калькулятора и указывает используемые допущения.
2. **Блок ввода параметров** — поля для рабочей нагрузки, ставок и расходов.
3. **Результаты расчёта** — итоговые значения (чистая/грязная зарплата, налоговая нагрузка, почасовая ставка, эффективность смены).
4. **Дополнительные опции** — кнопки «Сбросить», «Копировать результаты», подсказки.
5. **Блок помощи** — краткие пояснения формул и единиц измерения.

## Поля ввода и значения по умолчанию
Все поля должны иметь подсказку единиц измерения и плейсхолдер.

| Поле | Описание | Тип | Диапазон/валидация | Значение по умолчанию |
| --- | --- | --- | --- | --- |
| Формат занятости | Переключатель: «Частичная»/«Полная» | radio/select | Обязательно | Полная |
| Рабочие дни в месяц | Сколько дней логопед работает | number | 0–31, только целые | 20 |
| Часов в рабочий день | Продолжительность смены | number | 1–12, допускаются десятичные | 6 |
| Среднее занятий в день | Сколько сессий проводится | number | 0–16 | 8 |
| Средняя длительность занятия (мин) | Время одной сессии | number | 15–180 | 50 |
| Стоимость занятия для клиента | Брутто-доход с одного занятия | currency | >0 | 2500 ₽ |
| Доля логопеда от занятия | Процент, который получает специалист | percent | 0–100 | 60 % |
| Дополнительные платные услуги в месяц | Сумма, полученная за доп. услуги | currency | ≥0 | 0 ₽ |
| Материальные затраты в месяц | Расходы на материалы/аренду | currency | ≥0 | 3000 ₽ |
| Налоговая ставка | Фиксированный процент удержаний | percent | 0–100 | 13 % |
| Страховые/прочие удержания | Фиксированная сумма в месяц | currency | ≥0 | 0 ₽ |
| Коэффициент сверхурочных | Множитель оплаты часов сверх нормы | number | ≥1 | 1.5 |
| Сверхурочные часы в месяц | Часы сверх базового графика | number | ≥0 | 0 |
| Применить надбавку за опыт | Флаг, включает доп. коэффициент | checkbox | — | Выкл. |
| Коэффициент за опыт | Умножает долю логопеда | number | 1–2 | 1.1 |

## Расчётные показатели и формулы
Вычисления обновляются при каждом изменении ввода.

1. **Длительность оплачиваемых часов в день** = `min(Часов в рабочий день, (Среднее занятий в день × Средняя длительность занятия) / 60)`.
2. **Базовые рабочие часы в месяц** = `Длительность оплачиваемых часов в день × Рабочие дни в месяц`.
3. **Доход с занятий (брутто)** = `Среднее занятий в день × Рабочие дни в месяц × Стоимость занятия для клиента`.
4. **Доля логопеда за занятия** = `Доход с занятий × (Доля логопеда / 100) × (Применить надбавку за опыт ? Коэффициент за опыт : 1)`.
5. **Оплата сверхурочных** = `Сверхурочные часы в месяц × (Стоимость занятия для клиента / (Средняя длительность занятия / 60)) × Доля логопеда / 100 × Коэффициент сверхурочных`.
6. **Доход от доп. услуг** = `Дополнительные платные услуги в месяц`.
7. **Итого доход (до налогов)** = `Доля логопеда за занятия + Оплата сверхурочных + Доход от доп. услуг`.
8. **Вычеты и удержания** = `(Налоговая ставка / 100) × Итого доход + Страховые/прочие удержания + Материальные затраты в месяц`.
9. **Чистая зарплата** = `Итого доход (до налогов) – Вычеты и удержания`.
10. **Доход за час** = `Чистая зарплата / (Базовые рабочие часы в месяц + Сверхурочные часы в месяц)` — выводить «—» если деление на ноль.
11. **Сравнение сценариев** (опционально) — возможность вводить альтернативные наборы полей и показывать разницу: `Чистая зарплата (сценарий B) – Чистая зарплата (сценарий A)`.

## UX и валидация
- Все числовые поля — с локализованными масками (разделители тысяч, знак валюты).
- Обязательные поля отмечены и имеют мгновенную валидацию (без отправки формы).
- При ошибке поле подсвечивается, выводится текстовое пояснение рядом или ниже.
- Значения вне диапазона блокируют пересчёт и подсвечиваются.
- Поддержка горячих клавиш: Enter — пересчёт, Ctrl/Cmd+C — копирование результатов, Esc — сброс полей (если подтверждено).
- Мгновенный пересчёт при изменении полей; переключатели меняют доступность зависимых полей (например, коэффициент за опыт доступен только если включена надбавка).
- Фиксированный блок результата, остающийся в зоне видимости при прокрутке.
- Подсказки (tooltips) с пояснениями формул у полей «Доля логопеда», «Налоговая ставка», «Коэффициент сверхурочных».

## Дополнительные опции и сценарии
- **Сброс** — восстанавливает все поля к значениям по умолчанию; требует подтверждения, если введены пользовательские данные.
- **Копирование результатов** — копирует итоговый блок (грязная/чистая сумма, налоги, ставка за час) в буфер обмена в формате «поле: значение» и уведомляет о результате.
- **Сохранить сценарий** (опционально) — сохраняет текущий набор параметров в localStorage и позволяет быстро переключаться между сохранёнными сценариями.
- **Поделиться ссылкой** (опционально) — генерирует URL с параметрами расчёта для коллег.

## Нефункциональные требования
- Поддержка локали ru-RU для форматирования чисел и валют.
- Время отклика при пересчёте — не более 150 мс на настольных браузерах.
- Адаптивность: корректное отображение на экранах от 360 px.
- Доступность: навигация с клавиатуры, контрастность, aria-label для всех интерактивных элементов.

## Открытые вопросы
- Нужно ли учитывать разные системы налогообложения (УСН/патент) и фиксированные страховые взносы ИП?
- Требуется ли экспорт результатов в PDF/Excel?
- Должна ли система учитывать отмены/переносы занятий и оплачивать их по другим правилам?
