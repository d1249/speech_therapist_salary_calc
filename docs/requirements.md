# Требования к калькулятору зарплаты учителя-логопеда (дефектолога) ГБОУ Школа № 1400

Документ описывает бизнес-требования к веб-калькулятору расчёта зарплаты учителя-логопеда (дефектолога) в ГБОУ Школа № 1400 и служит единственным источником истинных допущений для команды разработки.

## Цели продукта

- Позволить учителю-логопеду быстро оценить ежемесячную зарплату с разбивкой:
  - базовый оклад по должности;
  - компенсации (в том числе за работу с ОВЗ);
  - оплата часов замещения отсутствующего учителя;
  - стимулирующие выплаты.
- Дать возможность моделировать разные сценарии (количество часов замены, размер доплаты за ОВЗ, наличие/отсутствие премий).
- Сделать прозрачной связь результата с нормативными параметрами (ученико-час, ставка по приказу, проценты доплат).

## Роли пользователей

- **Логопед/дефектолог** — основная роль, вводит параметры своей нагрузки и известных выплат, получает расчёт.
- **Экономист/бухгалтер школы** (опционально) — может настроить значения по умолчанию (ставка за час замены, стоимость ученико-часа, типичный процент доплаты за ОВЗ).
- **Администратор системы** (опционально) — отвечает за техническую часть, деплой и доступ.

## Основные разделы интерфейса

1. **Шапка/описание**
   - Кратко объясняет назначение калькулятора.
   - Указывает, что результаты ориентировочные и основаны на вводе пользователя.
   - Ссылка/перечень ключевых нормативных документов (без загрузки самих PDF).

2. **Блок ввода параметров**
   - Группировка по логическим блокам:
     - «Основной оклад логопеда»;
     - «Компенсационные выплаты»;
     - «Замещение отсутствующего учителя»;
     - «Стимулирующие выплаты»;
     - «Налоги и удержания».

3. **Результаты расчёта**
   - Итоговая «грязная» сумма (до удержаний).
   - НДФЛ и прочие удержания.
   - «Чистая» сумма к выплате.
   - Разбивка по компонентам (оклад, ОВЗ, замещение, стимулирующие).
   - Доля замещения в общей зарплате.

4. **Дополнительные опции**
   - Кнопки «Сбросить», «Копировать результаты».
   - Всплывающие подсказки (tooltips) на значках `?` около полей и формул.

5. **Блок помощи**
   - Краткие пояснения по терминам: «ставка», «ученико-час», «компенсационные выплаты», «стимулирующие выплаты».
   - Примеры для типичной ситуации (логопед с 1 ставкой и 12 часами замены в месяц).

## Поля ввода и значения по умолчанию

Все поля должны иметь:
- понятный label;
- подсказку единиц измерения;
- placeholder;
- при необходимости — значок `?` со всплывающим объяснением.

### 1. Общие параметры

| Поле | Описание | Тип | Диапазон/валидация | Значение по умолчанию |
| --- | --- | --- | --- | --- |
| Организация | Название школы (read-only) | text | — | «ГБОУ Школа № 1400» |
| Учебный год | Для справки, влияет только на подпись | select/text | 2025/2026 и далее | 2025/2026 |
| Категория работника | Фиксированное значение | text | — | «Иные педагогические работники (логопед/дефектолог)» |

### 2. Основной оклад логопеда

| Поле | Описание | Тип | Диапазон/валидация | Значение по умолчанию |
| --- | --- | --- | --- | --- |
| Доля ставки логопеда (S_log) | Доля полной ставки по основной должности | number | 0–1, шаг 0.25 | 1.0 |
| Оклад логопеда за 1 ставку в месяц (O_base) | Должностной оклад за полную ставку до НДФЛ, из приказа о тарификации | currency | >0 | 40 000 ₽ (пример, пользователь обязан заменить фактическим) |

### 3. Компенсационные выплаты

| Поле | Описание | Тип | Диапазон/валидация | Значение по умолчанию |
| --- | --- | --- | --- | --- |
| Доплата за работу с ОВЗ, % от оклада (K_OVZ) | Процент доплаты к базовому окладу | percent | 0–20 % | 20 % |
| Прочие компенсационные выплаты в месяц (Comp_other) | Суммарно: вредность, совмещение и т.п. | currency | ≥0 | 0 ₽ |

### 4. Замещение отсутствующего учителя

| Поле | Описание | Тип | Диапазон/валидация | Значение по умолчанию |
| --- | --- | --- | --- | --- |
| Есть ли замещение? | Флаг, включает/выключает блок замены | checkbox | — | Вкл. (для текущего кейса) |
| Часов замены в месяц (H_sub) | Сколько часов логопед фактически заменяет учителя | number | ≥0 | 12 |
| Тип класса | Влияет на расчёт по ученико-часу | radio | «Обычный», «Коррекционный/малокомплектный» | «Коррекционный/малокомплектный» |
| Количество обучающихся в классе (N_class) | Используется в режиме расчёта по ученико-часу | number | 1–35, целое | 10 |
| Режим расчёта ставки за 1 час замены | Выбор методики | select | «По приказу школы» / «По ученико-часу» | «По приказу школы» |
| Ставка за 1 час замены по приказу (R_sub_fixed) | Фактическая ставка замещения из приказа (например, 350 ₽/час) | currency | ≥0 | 350 ₽ |
| Стоимость 1 ученико-часа (C_stu) | Размер ученико-часа для основной деятельности | currency | ≥0 | 37 ₽ |

Поведение:
- Если «Есть ли замещение?» = выкл — все остальные поля этого блока не влияют на расчёты.
- Если режим «По приказу школы» — используется только `H_sub` и `R_sub_fixed`.
- Если режим «По ученико-часу» — используется `H_sub`, `C_stu`, `N_class`, флаг типа класса.

### 5. Стимулирующие выплаты

| Поле | Описание | Тип | Диапазон/валидация | Значение по умолчанию |
| --- | --- | --- | --- | --- |
| Ежемесячная стимулирующая выплата (Stim_month) | Стабильная ежемесячная стим. выплата (включая «ежемесячную выплату 2025/2026») | currency | ≥0 | 0 ₽ |
| Ожидаемые премии за месяц (Prem_month) | Среднемесячная оценка премий (разовые, квартальные, годовые, усреднённые) | currency | ≥0 | 0 ₽ |
| Прочие стимулирующие выплаты в месяц (Stim_other) | Иные регулярные стимулирующие доплаты | currency | ≥0 | 0 ₽ |

### 6. Налоги и удержания

| Поле | Описание | Тип | Диапазон/валидация | Значение по умолчанию |
| --- | --- | --- | --- | --- |
| Ставка НДФЛ (Ndfl_rate) | Процент подоходного налога | percent | 0–100 | 13 % |
| Прочие удержания (Withhold_other) | Алимменты, исполнительные листы и др. | currency | ≥0 | 0 ₽ |

## Расчётные показатели и формулы

Вычисления обновляются при каждом изменении ввода.

Обозначения (соответствуют полям выше):

- `S_log` — доля ставки логопеда.
- `O_base` — оклад логопеда за 1 ставку.
- `K_OVZ` — процент доплаты за ОВЗ.
- `Comp_other` — прочие компенсации.
- `H_sub` — часов замещения в месяц.
- `R_sub_fixed` — ставка замены по приказу.
- `C_stu` — стоимость ученико-часа.
- `N_class` — численность класса.
- `Stim_month`, `Prem_month`, `Stim_other` — стимулирующие выплаты.
- `Ndfl_rate`, `Withhold_other` — налоги и прочие удержания.

### 1. Базовый оклад логопеда

`Base_salary = O_base × S_log`

### 2. Компенсация за работу с ОВЗ

`Comp_OVZ = Base_salary × K_OVZ / 100`

### 3. Общая компенсационная часть

`Comp_total = Comp_OVZ + Comp_other`

### 4. Ставка за 1 час замещения учителя

В калькуляторе используются два режима, выбираемых пользователем:

1. **Режим A — «По приказу школы»**

`R_sub_current = R_sub_fixed`

2. **Режим B — «По ученико-часу» (упрощённая методика)**

```text
Если тип класса = «Коррекционный/малокомплектный»:
    R_sub_current = C_stu × 25      // оплата как за 25 учеников независимо от фактического N_class
Иначе (обычный класс):
    R_sub_current = C_stu × N_class
```

Пояснение в help-тексте: для коррекционных/малокомплектных классов считается, что коэффициент корректирует численность до 25 человек, чтобы оплата за урок не падала при малом составе.

### 5. Оплата за замещение в месяц

`Subst_payment = H_sub × R_sub_current`

Если блок «Есть ли замещение?» выключен или `H_sub = 0`, то `Subst_payment = 0`.

### 6. Стимулирующая часть

`Stim_total = Stim_month + Prem_month + Stim_other`

### 7. Итоговая сумма начислений (до удержаний)

`Gross_salary = Base_salary + Comp_total + Subst_payment + Stim_total`

### 8. Удержания

- НДФЛ:  
    `Ndfl_amount = Gross_salary × Ndfl_rate / 100`
    
- Прочие удержания:  
    `Withhold_other` (вводится пользователем).
    
- Всего удержаний:  
    `Total_withhold = Ndfl_amount + Withhold_other`
    

### 9. Чистая зарплата (к выплате)

`Net_salary = Gross_salary - Total_withhold`

Если `Gross_salary ≤ 0`, выводить Net_salary = 0 и пометку, что результат невалиден/требует проверки исходных данных.

### 10. Дополнительные показатели

1. **Доля замещения в общей зарплате**  
    `Share_subst_percent = Subst_payment / Gross_salary × 100`  
    Если `Gross_salary = 0`, выводить «—».
    
2. **Условная «цена» одного часа замещения после налогов**  
    `Subst_hour_net = (Subst_payment - Subst_payment × Ndfl_rate / 100) / max(H_sub, 1)`  
    При `H_sub = 0` выводить «—».
    

## UX и валидация

(Сохранить общую логику из предыдущей версии с адаптацией под новые поля.)

- Все числовые поля — с локализованными масками (разделители тысяч, знак валюты).
    
- Обязательные поля (`O_base`, `S_log`, ставка замены при режиме A) должны быть заполнены.
    
- Диапазоны:
    
    - `S_log` только 0–1;
        
    - `K_OVZ` только 0–20%;
        
    - `Ndfl_rate` 0–100%;
        
    - `H_sub`, `N_class`, выплаты и удержания — неотрицательные.
        
- При некорректном значении:
    
    - поле подсвечивается;
        
    - выводится понятное текстовое сообщение;
        
    - расчёт либо блокируется, либо производится с пропуском проблемного компонента (по договорённости).
        
- Блок результатов закрепляется и остаётся в зоне видимости при прокрутке.
    
- Всплывающие подсказки `?` обязательны как минимум для полей:
    
    - «Оклад логопеда за 1 ставку»;
        
    - «Доплата за работу с ОВЗ»;
        
    - «Режим расчёта ставки за 1 час замены»;
        
    - «Стоимость 1 ученико-часа»;
        
    - «Ежемесячная стимулирующая выплата».
        

## Дополнительные опции и сценарии

- **Сброс** — восстанавливает значения по умолчанию (настройка администратора); требует подтверждения.
    
- **Копировать результаты** — копирует блок результатов в буфер обмена в человекочитаемом формате.
    
- **Сохранить сценарий** (опционально) — localStorage с параметрами расчёта (например, «без замены», «12 часов замены»).
    
- **Поделиться ссылкой** (опционально) — формирование URL с query-параметрами.
    

## Нефункциональные требования

- Локаль `ru-RU` для чисел и валют.
    
- Время пересчёта — не более 150 мс на настольных браузерах.
    
- Адаптивная вёрстка: корректная работа на экранах от 360 px (мобильные устройства).
    
- Доступность: навигация с клавиатуры, контрастность, `aria-label` для интерактивных элементов.
